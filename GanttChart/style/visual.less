/* ═══════════════════════════════════════════════
   Gantt Chart – Power BI Custom Visual Styles
   H1: Reduced nesting, reusable classes
   H2: CSS variables for dynamic styling
   ═══════════════════════════════════════════════ */

.gantt-container {
    --sb-width: 8px;
    --sb-track: #F0F0F0;
    --sb-thumb: #CCCCCC;
    --sb-thumb-hover: #999999;
    --sb-radius: 4px;
}

.gantt-container,
.gantt-container *,
.gantt-container *::before,
.gantt-container *::after { box-sizing: border-box; }

.gantt-container {
    position: relative;
    overflow: hidden;
    font-family: "Segoe UI", "wf_segoe-ui_normal", "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 11px;
    color: #333;
    background: #fff;
    display: flex;
    flex-direction: column;
    width: 100%;
    height: 100%;
}

.gantt-container.gantt-resizing { cursor: col-resize; user-select: none; }

.gantt-error {
    display: none;
    position: absolute;
    inset: 0;
    z-index: 100;
    background: #fff;
    color: #888;
    font-size: 13px;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 32px;
    line-height: 1.8;
    white-space: pre-line;
}

/* ── Toolbar ── */
.gantt-toolbar {
    display: flex;
    flex-shrink: 0;
    height: 34px;
    align-items: center;
    padding: 0 6px;
    border-bottom: 1px solid #e0e0e0;
    background: #fafafa;
    overflow: hidden;
}

.gantt-toolbar-group { display: flex; align-items: center; gap: 2px; }
.gantt-toolbar-sep { width: 1px; height: 18px; background: #ddd; margin: 0 6px; flex-shrink: 0; }

.gantt-zoom-btn,
.gantt-tool-btn {
    height: 24px;
    padding: 0 8px;
    border: 1px solid #ccc;
    border-radius: 3px;
    background: #fff;
    color: #555;
    font-size: 10.5px;
    font-family: inherit;
    cursor: pointer;
    outline: none;
    transition: background 0.15s, border-color 0.15s, color 0.15s;
    white-space: nowrap;
}

.gantt-zoom-btn:hover,
.gantt-tool-btn:hover { filter: brightness(0.93); }

.gantt-search-input {
    height: 24px;
    width: 140px;
    padding: 0 8px;
    border: 1px solid #ccc;
    border-radius: 3px;
    font-size: 10.5px;
    font-family: inherit;
    color: #333;
    outline: none;
    transition: border-color 0.15s, box-shadow 0.15s;
}

.gantt-search-input:focus { border-color: #0078d4; box-shadow: 0 0 0 1px rgba(0, 120, 212, 0.2); }
.gantt-search-input::placeholder { color: #aaa; }

/* ── Main area ── */
.gantt-main { display: flex; flex: 1; overflow: hidden; min-height: 0; }

.gantt-resize-handle {
    width: 5px;
    flex-shrink: 0;
    cursor: col-resize;
    background: #d0d0d0;
    transition: background 0.15s;
    z-index: 10;
}

.gantt-resize-handle:hover { background: #0078d4; }

/* ── Grid pane ── */
.gantt-grid { flex-shrink: 0; display: flex; flex-direction: column; overflow: hidden; background: #fff; }
.gantt-grid-header { flex-shrink: 0; overflow: hidden; border-bottom: 1px solid #ccc; background: #f5f5f5; }
.gantt-grid-header-row { display: flex; width: 100%; font-weight: 600; }

.gantt-grid-body { flex: 1; overflow-y: auto; overflow-x: hidden; position: relative; }
.gantt-grid-body::-webkit-scrollbar { width: 0; height: 0; }
.gantt-grid-body { scrollbar-width: none; }

.gantt-grid-row {
    display: flex;
    align-items: center;
    border-bottom: 1px solid #f0f0f0;
    cursor: pointer;
    transition: background 0.1s;
}

.gantt-grid-row:hover { background: rgba(0, 120, 212, 0.06) !important; }
.gantt-grid-row-group { font-weight: 600; }
.gantt-grid-row-selected { background: #e3f0ff !important; }

.gantt-grid-cell { flex-shrink: 0; padding: 0 6px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.gantt-grid-cell-name { flex: 1; min-width: 0; display: flex; align-items: center; gap: 2px; }
.gantt-grid-cell-date { width: 80px; text-align: center; font-size: 10px; color: #777; }
.gantt-grid-cell-num { width: 44px; text-align: center; font-size: 10px; color: #666; }
.gantt-grid-cell-extra { width: 72px; text-align: left; font-size: 10px; color: #666; }

.gantt-toggle { cursor: pointer; user-select: none; width: 14px; flex-shrink: 0; text-align: center; font-size: 11px; color: #666; }
.gantt-toggle:hover { color: #0078d4; }
.gantt-toggle-spacer { width: 14px; flex-shrink: 0; display: inline-block; }
.gantt-task-label { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; min-width: 0; }
.gantt-critical-label { color: #D32F2F; font-weight: 600; }

/* ── Timeline pane ── */
.gantt-timeline { flex: 1; display: flex; flex-direction: column; overflow: hidden; min-width: 0; }
.gantt-timeline-header { flex-shrink: 0; overflow: hidden; border-bottom: 1px solid #ccc; background: #f5f5f5; }
.gantt-timeline-header svg { display: block; }
.gantt-timeline-body { flex: 1; overflow: auto; }

/* ── SVG elements ── */
.gantt-hline { stroke: #f0f0f0; stroke-width: 0.5; }
.gantt-vline { pointer-events: none; }
.gantt-bar { cursor: pointer; transition: opacity 0.15s; }
.gantt-bar-group { cursor: pointer; }
.gantt-progress { pointer-events: none; }
.gantt-bar-progress-label { pointer-events: none; text-shadow: 0 0 3px rgba(0, 0, 0, 0.6); }
.gantt-bar-label-ext { pointer-events: none; }
.gantt-planned-bar { pointer-events: none; }
.gantt-group-bar rect,
.gantt-group-bar polygon,
.gantt-group-bar line { cursor: pointer; }
.gantt-milestone polygon,
.gantt-milestone circle { cursor: pointer; }
.gantt-milestone-marker { cursor: pointer; }
.gantt-today-line { pointer-events: none; }
.gantt-weekend { pointer-events: none; }
.gantt-dep-line { pointer-events: none; }
